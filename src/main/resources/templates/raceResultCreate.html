<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml"
      sec:authorize="hasAuthority('ADMIN')">

<div th:insert="parts/_header :: header"></div>
<div th:insert="parts/_menu :: menu"></div>

<body>

<div style="margin-left:20px" class="ui mini breadcrumb">
    <a class="section" href="/">Главная</a>
    <i class="right angle icon divider"></i>
    <a class="section" href="/autosport">Автоспорт</a>
    <i class="right angle icon divider"></i>
    <a class="section" th:href="@{/autosport/{id}(id=${race.series.id})}" th:text="${race.series.name}"></a>
    <i class="right angle icon divider"></i>
    <a class="section" th:href="@{/autosport/calendar/{id}(id=${race.series.id})}">Календарь</a>
    <i class="right angle icon divider"></i>
    <a class="section" th:href="@{/autosport/raceResult/{id}(id=${race.id})}"
       th:text="${'Результаты' + ' ' + race.name}"></a>
    <i class="right angle icon divider"></i>
    <div class="active section">Добавить результаты гонки</div>
</div>

<div class="ui raised very padded text container segment">
    <form class="ui form" action="#" th:action="@{/raceResultCreate}" th:object="${raceResult}" method="post">
        <div class="field">
            <label>Позиция</label>
            <input type="text" name="position" placeholder="Позиция" th:field="*{position}">
        </div>
        <div class="field">
            <label>Пилот</label>
            <select class="ui search dropdown" id="pilot" th:field="*{pilot}">
                <option value="0"></option>
                <option th:each="person : ${persons}"
                        th:value="${person.id}"
                        th:text="${person.getName()}">
                </option>
            </select>
        </div>
        <div class="field" th:if="${race.series.name == 'WRC'}">
            <label>Штурман</label>
            <select class="ui search dropdown" id="navigator" th:field="*{navigator}">
                <option value="0"></option>
                <option th:each="person : ${persons}"
                        th:value="${person.id}"
                        th:text="${person.getName()}">
                </option>
            </select>
        </div>
        <div class="field">
            <label>Машина</label>
            <select class="ui search dropdown" id="car" th:field="*{modification}">
                <option value="0"></option>
                <option th:each="modification : ${modifications}"
                        th:value="${modification.id}"
                        th:text="${modification.bodyType.generation.manufacturer.name + ' ' +
                                   modification.bodyType.generation.carmodel.name + ' ' +
                                   modification.name}">
                </option>
            </select>
        </div>
        <div class="field">
            <label>Команда</label>
            <select class="ui search dropdown" id="team" th:field="*{team}">
                <option value="0"></option>
                <option th:each="team : ${teams}"
                        th:value="${team.id}"
                        th:text="${team.getName()}">
                </option>
            </select>
        </div>
        <div class="field" th:if="${race.series.name == 'WRC'}">
            <label>Класс</label>
            <select class="ui search dropdown" id="raceClass" th:field="*{raceClass}">
                <option value="0"></option>
                <option th:each="raceClass : ${raceClasses}"
                        th:value="${raceClass.id}"
                        th:text="${raceClass.getName()}">
                </option>
            </select>
        </div>
        <div class="field">
            <label>Время</label>
            <input type="text" name="time" placeholder="Время" th:field="*{time}">
        </div>
        <div class="field" th:if="${race.series.name == 'WRC'}">
            <label>Отставание</label>
            <input type="text" name="gap" placeholder="Отставание" th:field="*{gap}">
        </div>
        <div class="field" th:if="${race.series.name == 'Formula 1'}">
            <label>Скорость</label>
            <input type="text" name="avSpeed" placeholder="Скорость" th:field="*{avSpeed}">
        </div>
        <div class="field" th:if="${race.series.name == 'Formula 1'}">
            <label>Пит-стопы</label>
            <input type="text" name="pitStop" placeholder="Пит-стопы" th:field="*{pitStop}">
        </div>
        <div class="field">
            <label>Сход</label>
            <input type="text" name="out" placeholder="Сход" th:field="*{out}">
        </div>
        <div class="field">
            <label>Очки</label>
            <input type="text" name="points" placeholder="Очки" th:field="*{points}">
        </div>
        <div class="field" th:if="${race.series.name == 'WRC'}">
            <label>Бонус</label>
            <input type="text" name="bonus" placeholder="Бонус" th:field="*{bonus}">
        </div>

        <button class="ui button" type="submit">Добавить</button>
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
    </form>
</div>
<script>
    $('.ui.dropdown').dropdown();
</script>
<div th:insert="parts/_footer :: footer"></div>
</body>
</html>